(()=>{function e(){window.postMessage({type:"FROM_EXTENSION_JUST_INSTALLED",payload:{message:"extension just installed",data:{}}},"*"),console.log("PostMessage sent - check if received")}window.addEventListener("message",function(e){e.source===window&&e.data.type&&"FROM_PAGE"===e.data.type&&(console.log("Content script received button message:",e.data.tag),chrome.runtime.sendMessage({type:"FROM_PAGE",payload:e.data.tag},function(t){window.postMessage({type:"FROM_EXTENSION",payload:{responseTo:e.data.tag,data:t,timestamp:Date.now()}},"*")}))}),chrome.runtime.onMessage.addListener(function(e,t,a){console.log("request type: ",e.type),"FROM_EXTENSION"===e.type&&window.postMessage({type:"FROM_EXTENSION",payload:e.payload},"*")}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()})();